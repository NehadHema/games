{"ast":null,"code":"import _regeneratorRuntime from\"D:/2020/Courses/2022/Route/Assignments/React/Assignment2/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"D:/2020/Courses/2022/Route/Assignments/React/Assignment2/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _objectSpread from\"D:/2020/Courses/2022/Route/Assignments/React/Assignment2/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"D:/2020/Courses/2022/Route/Assignments/React/Assignment2/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import logo from'../images/logo.png';import{NavLink,useNavigate}from'react-router-dom';import axios from'axios';import Joi from'joi';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function Login(props){var _useState=useState({email:'',password:''}),_useState2=_slicedToArray(_useState,2),userLogin=_useState2[0],setUserLogin=_useState2[1];var loginArray=_objectSpread({},userLogin);var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),errorValidation=_useState4[0],seterrorValidation=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isLoading=_useState6[0],setIsLoading=_useState6[1];function validatation(){var validateRules=Joi.object({email:Joi.string().email({minDomainSegments:2,tlds:{allow:false}}).required().messages({\"string.empty\":\"email is required\",\"string.email\":\"You have to enter email like example@yahoo.com\"}),password:Joi.string().pattern(new RegExp('^[a-zA-Z0-9]{3,30}$')).required().messages({\"string.empty\":\"password is required\"// \"object.regex\": \"You must be enter 3 or more characters or numbers\"\n})});var validatationResult=validateRules.validate(userLogin,{abortEarly:false});if(validatationResult.error!==undefined){seterrorValidation(validatationResult.error.details);setIsLoading(false);return false;}else{seterrorValidation([]);return true;}}var redirect=useNavigate();var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),apimessage=_useState8[0],setapiMessage=_useState8[1];function login(_x){return _login.apply(this,arguments);}function _login(){_login=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var _yield$axios$post,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();if(!(validatation()!==undefined)){_context.next=10;break;}setIsLoading(true);_context.next=5;return axios.post('https://sticky-note-fe.vercel.app/signin',userLogin);case 5:_yield$axios$post=_context.sent;data=_yield$axios$post.data;console.log(data);setapiMessage(data.message);if(data.message==='success'){props.setIsLogin(true);localStorage.setItem('token',data.token);console.log(data.token);redirect('/home');}case 10:case\"end\":return _context.stop();}}},_callee);}));return _login.apply(this,arguments);}function alerts(inputName){var x=errorValidation.filter(function(err){return err.message.includes(inputName);});if(x[0]!==undefined){return/*#__PURE__*/_jsx(\"p\",{className:\"text-danger\",children:x[0].message});}else{return\"\";}}return/*#__PURE__*/_jsxs(_Fragment,{children:[errorValidation.map(function(error){if(error.message.includes('pattern')){error.message='password must be at least 3 letters or numbers';}}),/*#__PURE__*/_jsx(\"div\",{className:\"py-5\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container p-lg-5 py-5\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row  p-0 loginrow o-hidden border-0 shadow-lg\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-lg-6 d-none d-lg-block leftside\"}),/*#__PURE__*/_jsx(\"div\",{className:\"col-lg-6 rightside\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"p-5\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"img\",{src:logo,alt:\"logo in login\",height:\"72\",className:\"mb-3\"}),/*#__PURE__*/_jsx(\"h1\",{className:\"h4 text-gray-900 mb-4\",children:\"Log in to GameOver\"})]}),/*#__PURE__*/_jsxs(\"form\",{className:\"login\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"email\",onChange:function onChange(e){loginArray.email=e.target.value;setUserLogin(loginArray);},name:\"email\",placeholder:\"Email\",className:\"form-control py-2\"}),errorValidation.length>0?alerts('email'):'']}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"password\",onChange:function onChange(e){loginArray.password=e.target.value;setUserLogin(loginArray);},name:\"password\",placeholder:\"Password\",className:\"form-control form-control-user deep-dark py-2\"}),errorValidation.length>0?alerts('password'):'']}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",name:\"submitButton\",onClick:login,className:\"btn btn-primary w-100 py-2\",children:/*#__PURE__*/_jsxs(\"span\",{children:[isLoading?/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-spinner fa-spin\"}):\"Login\",\" \"]})})]}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"div\",{className:\"text-center\",children:/*#__PURE__*/_jsx(NavLink,{onClick:function onClick(e){e.preventDefault();alert('ههه اعمل اكونت جديد');},className:\"small cursor\",children:\"Forgot Password?\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"small\",children:\"Not a member yet? \"}),/*#__PURE__*/_jsxs(NavLink,{to:'register',className:\"small\",children:[\" Create Account\",/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-chevron-right small\"})]})]}),/*#__PURE__*/_jsx(\"h5\",{children:apimessage})]})})]})})})]});}","map":{"version":3,"names":["React","useState","logo","NavLink","useNavigate","axios","Joi","Login","props","email","password","userLogin","setUserLogin","loginArray","errorValidation","seterrorValidation","isLoading","setIsLoading","validatation","validateRules","object","string","minDomainSegments","tlds","allow","required","messages","pattern","RegExp","validatationResult","validate","abortEarly","error","undefined","details","redirect","apimessage","setapiMessage","login","e","preventDefault","post","data","console","log","message","setIsLogin","localStorage","setItem","token","alerts","inputName","x","filter","err","includes","map","target","value","length","alert"],"sources":["D:/2020/Courses/2022/Route/Assignments/React/Assignment2/src/Login/Login.jsx"],"sourcesContent":["import React ,{useState} from 'react'\r\nimport logo from '../images/logo.png';\r\nimport {NavLink , useNavigate} from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport Joi from 'joi';\r\n\r\nexport default function Login(props) {\r\n  \r\nconst [userLogin,setUserLogin]= useState({\r\n  email:'',\r\n  password:''\r\n});\r\n\r\n let loginArray = {...userLogin};\r\n\r\n let[errorValidation,seterrorValidation]=useState([]);\r\n\r\n let [isLoading , setIsLoading]=useState(false);\r\nfunction validatation(){\r\n  const validateRules =Joi.object({\r\n    email:Joi.string().email({ minDomainSegments: 2, tlds: { allow: false } }).required().messages({\r\n      \"string.empty\":\"email is required\",\r\n      \"string.email\":\"You have to enter email like example@yahoo.com\"\r\n    }),\r\n    password:Joi.string().pattern(new RegExp('^[a-zA-Z0-9]{3,30}$')).required().messages({\r\n      \"string.empty\":\"password is required\",\r\n      // \"object.regex\": \"You must be enter 3 or more characters or numbers\"\r\n    })\r\n  });\r\n  let validatationResult = validateRules.validate(userLogin,{abortEarly:false});\r\n  if(validatationResult.error !==undefined){\r\n    seterrorValidation(validatationResult.error.details);\r\n    setIsLoading(false);\r\n    return false;\r\n  }else{\r\n   seterrorValidation([]);\r\n   return true;\r\n  }\r\n}\r\n\r\nlet redirect = useNavigate();\r\nconst[apimessage,setapiMessage]=useState('');\r\n\r\nasync function login(e){\r\n e.preventDefault();\r\n if (validatation() !== undefined) {\r\n  setIsLoading(true);\r\n\r\n  let {data}= await axios.post('https://sticky-note-fe.vercel.app/signin',userLogin);\r\nconsole.log(data);\r\n    setapiMessage(data.message);\r\n \r\n if(data.message ==='success'){\r\n  props.setIsLogin(true);\r\n  localStorage.setItem('token',data.token);\r\n  console.log(data.token);\r\n  \r\n  redirect('/home');\r\n }\r\n }\r\n}\r\n\r\n\r\nfunction alerts(inputName){\r\nlet x = errorValidation.filter( (err)=>{ return err.message.includes(inputName)});\r\nif(x[0] !== undefined){\r\n  return <p className='text-danger'>{x[0].message}</p>\r\n}else{\r\n  return \"\";\r\n}\r\n\r\n}\r\n\r\n  return (\r\n    <>\r\n     {errorValidation.map((error) => {\r\n  if (error.message.includes('pattern')) {\r\n    error.message = 'password must be at least 3 letters or numbers';\r\n  }\r\n})}\r\n      <div className=\"py-5\">\r\n      <div className=\"container p-lg-5 py-5\">\r\n        <div className=\"row  p-0 loginrow o-hidden border-0 shadow-lg\">\r\n          <div className=\"col-lg-6 d-none d-lg-block leftside\">\r\n          </div>\r\n          <div className=\"col-lg-6 rightside\">\r\n          <div className=\"p-5\">\r\n            <div className=\"text-center\">\r\n              <img src={logo} alt=\"logo in login\" height=\"72\" className=\"mb-3\"/>\r\n                <h1  className=\"h4 text-gray-900 mb-4\">Log in to GameOver</h1>\r\n                </div>\r\n                <form className=\"login\">\r\n                  <div className=\"form-group\">\r\n                    <input type=\"email\"  onChange={(e)=>{\r\n                     loginArray.email=e.target.value;\r\n                     setUserLogin(loginArray);}} name=\"email\" placeholder=\"Email\" className=\"form-control py-2\"/>\r\n                      {errorValidation.length>0?alerts('email'):''}\r\n                  </div>\r\n                  <div className=\"form-group\">\r\n                    <input type=\"password\" onChange={(e)=>{\r\n                      loginArray.password=e.target.value;\r\n                      setUserLogin(loginArray);}} name=\"password\" placeholder=\"Password\" className=\"form-control form-control-user deep-dark py-2\"/>\r\n                      {errorValidation.length>0?alerts('password'):''}\r\n                  </div>\r\n                  <button type=\"submit\" name=\"submitButton\" onClick={login} className=\"btn btn-primary w-100 py-2\">\r\n                    <span>{isLoading ? <i className='fa fa-spinner fa-spin'></i> :\"Login\"} </span>\r\n                  </button>\r\n                  </form>\r\n                  <hr/>\r\n                  <div className=\"text-center\">\r\n                    <NavLink onClick={(e)=>{e.preventDefault(); alert('ههه اعمل اكونت جديد');}} className=\"small cursor\">Forgot Password?</NavLink>\r\n                    </div>\r\n                    <div className=\"text-center\">\r\n                      <span className=\"small\">Not a member yet? </span>\r\n                      <NavLink to={'register'} className=\"small\"> Create Account<i className=\"fas fa-chevron-right small\"></i></NavLink>\r\n                      </div>\r\n                      <h5>{apimessage}</h5>\r\n                      </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      </div>\r\n    </>\r\n  )\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}